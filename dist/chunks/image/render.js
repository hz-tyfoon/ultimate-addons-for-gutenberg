(window["webpackJsonp_ultimate_addons_for_gutenberg"] = window["webpackJsonp_ultimate_addons_for_gutenberg"] || []).push([["chunks/image/render"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./src/blocks/image/editor.lazy.scss":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./src/blocks/image/editor.lazy.scss ***!
  \**************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default.a);
// Module
___CSS_LOADER_EXPORT___.push([module.i, ".uagb-inspector-tab .block-editor-image-size-control .block-editor-image-size-control__row {\n  text-transform: capitalize; }\n\n.uagb-inspector-tab .components-base-control label.components-input-control__label {\n  text-transform: capitalize; }\n\n.uagb-inspector-tab .block-editor-image-size-control__row .components-button-group .components-button {\n  border: 1px solid #8f9395;\n  box-shadow: none;\n  font-size: 13px;\n  font-weight: 400;\n  height: 26px; }\n  .uagb-inspector-tab .block-editor-image-size-control__row .components-button-group .components-button.is-pressed {\n    background: #0085ba;\n    border-color: #0085ba; }\n\n.wp-block-uagb-image .components-placeholder.is-medium .components-placeholder__instructions {\n  display: block !important; }\n\n.wp-block-uagb-image .components-placeholder.is-medium .components-placeholder__fieldset {\n  flex-direction: row; }\n  .wp-block-uagb-image .components-placeholder.is-medium .components-placeholder__fieldset .components-button {\n    margin-right: 10px; }\n", "",{"version":3,"sources":["webpack://./src/blocks/image/editor.lazy.scss"],"names":[],"mappings":"AAAA;EACE,0BAA0B,EAAE;;AAE9B;EACE,0BAA0B,EAAE;;AAE9B;EACE,yBAAyB;EACzB,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,YAAY,EAAE;EACd;IACE,mBAAmB;IACnB,qBAAqB,EAAE;;AAE3B;EACE,yBAAyB,EAAE;;AAE7B;EACE,mBAAmB,EAAE;EACrB;IACE,kBAAkB,EAAE","sourcesContent":[".uagb-inspector-tab .block-editor-image-size-control .block-editor-image-size-control__row {\n  text-transform: capitalize; }\n\n.uagb-inspector-tab .components-base-control label.components-input-control__label {\n  text-transform: capitalize; }\n\n.uagb-inspector-tab .block-editor-image-size-control__row .components-button-group .components-button {\n  border: 1px solid #8f9395;\n  box-shadow: none;\n  font-size: 13px;\n  font-weight: 400;\n  height: 26px; }\n  .uagb-inspector-tab .block-editor-image-size-control__row .components-button-group .components-button.is-pressed {\n    background: #0085ba;\n    border-color: #0085ba; }\n\n.wp-block-uagb-image .components-placeholder.is-medium .components-placeholder__instructions {\n  display: block !important; }\n\n.wp-block-uagb-image .components-placeholder.is-medium .components-placeholder__fieldset {\n  flex-direction: row; }\n  .wp-block-uagb-image .components-placeholder.is-medium .components-placeholder__fieldset .components-button {\n    margin-right: 10px; }\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/blocks/image/constants.js":
/*!***************************************!*\
  !*** ./src/blocks/image/constants.js ***!
  \***************************************/
/*! exports provided: MIN_SIZE, LINK_DESTINATION_NONE, LINK_DESTINATION_MEDIA, LINK_DESTINATION_ATTACHMENT, LINK_DESTINATION_CUSTOM, NEW_TAB_REL, ALLOWED_MEDIA_TYPES, MEDIA_ID_NO_FEATURED_IMAGE_SET */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_SIZE", function() { return MIN_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_DESTINATION_NONE", function() { return LINK_DESTINATION_NONE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_DESTINATION_MEDIA", function() { return LINK_DESTINATION_MEDIA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_DESTINATION_ATTACHMENT", function() { return LINK_DESTINATION_ATTACHMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINK_DESTINATION_CUSTOM", function() { return LINK_DESTINATION_CUSTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NEW_TAB_REL", function() { return NEW_TAB_REL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ALLOWED_MEDIA_TYPES", function() { return ALLOWED_MEDIA_TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEDIA_ID_NO_FEATURED_IMAGE_SET", function() { return MEDIA_ID_NO_FEATURED_IMAGE_SET; });
const MIN_SIZE = 20;
const LINK_DESTINATION_NONE = 'none';
const LINK_DESTINATION_MEDIA = 'media';
const LINK_DESTINATION_ATTACHMENT = 'attachment';
const LINK_DESTINATION_CUSTOM = 'custom';
const NEW_TAB_REL = ['noreferrer', 'noopener'];
const ALLOWED_MEDIA_TYPES = ['image'];
const MEDIA_ID_NO_FEATURED_IMAGE_SET = 0;

/***/ }),

/***/ "./src/blocks/image/editor.lazy.scss":
/*!*******************************************!*\
  !*** ./src/blocks/image/editor.lazy.scss ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_lib_loader_js_editor_lazy_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./editor.lazy.scss */ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./src/blocks/image/editor.lazy.scss");

            

var refs = 0;
var update;
var options = {"injectType":"lazySingletonStyleTag","attributes":{"id":"uagb-editor-styles"}};

options.insert = "head";
options.singleton = true;

var exported = {};

exported.locals = _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_lib_loader_js_editor_lazy_scss__WEBPACK_IMPORTED_MODULE_1__["default"].locals || {};
exported.use = function() {
  if (!(refs++)) {
    update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_lib_loader_js_editor_lazy_scss__WEBPACK_IMPORTED_MODULE_1__["default"], options);
  }

  return exported;
};
exported.unuse = function() {
  if (refs > 0 && !--refs) {
    update();
    update = null;
  }
};



;
       /* harmony default export */ __webpack_exports__["default"] = (exported);


/***/ }),

/***/ "./src/blocks/image/image.js":
/*!***********************************!*\
  !*** ./src/blocks/image/image.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Image; });
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_compose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/compose */ "@wordpress/compose");
/* harmony import */ var _wordpress_compose__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/data */ "@wordpress/data");
/* harmony import */ var _wordpress_data__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_data__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _wordpress_url__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @wordpress/url */ "@wordpress/url");
/* harmony import */ var _wordpress_url__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_wordpress_url__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/index.js");
/* harmony import */ var _use_client_width__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./use-client-width */ "./src/blocks/image/use-client-width.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./constants */ "./src/blocks/image/constants.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils */ "./src/blocks/image/utils.js");











function Image(_ref) {
  var _imageRef$current3;

  let {
    temporaryURL,
    attributes: {
      url = '',
      alt,
      align,
      id,
      width,
      height
    },
    setAttributes,
    isSelected,
    onCloseModal,
    onSelectImage,
    onSelectURL,
    onUploadError,
    containerRef,
    context,
    clientId,
    onImageLoadError
  } = _ref;
  const imageRef = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__["useRef"])();
  const {
    allowResize = true
  } = context;
  const {
    toggleSelection
  } = Object(_wordpress_data__WEBPACK_IMPORTED_MODULE_2__["useDispatch"])(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["store"]);
  const {
    multiImageSelection
  } = Object(_wordpress_data__WEBPACK_IMPORTED_MODULE_2__["useSelect"])(select => {
    const {
      getMultiSelectedBlockClientIds,
      getBlockName
    } = select(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["store"]);
    const multiSelectedClientIds = getMultiSelectedBlockClientIds();
    return {
      multiImageSelection: multiSelectedClientIds.length && multiSelectedClientIds.every(_clientId => getBlockName(_clientId) === 'uagb/image')
    };
  }, [id, isSelected]);
  const {
    imageEditing,
    maxWidth
  } = Object(_wordpress_data__WEBPACK_IMPORTED_MODULE_2__["useSelect"])(select => {
    const {
      getSettings
    } = select(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["store"]); // eslint-disable-next-line no-shadow

    const {
      imageEditing,
      maxWidth
    } = getSettings();
    return {
      imageEditing,
      maxWidth
    };
  }, [clientId]);
  const isLargeViewport = Object(_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__["useViewportMatch"])('medium');
  const isWideAligned = ['wide', 'full'].includes(align);
  const [{
    loadedNaturalWidth,
    loadedNaturalHeight
  }, setLoadedNaturalSize] = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__["useState"])({});
  const [isEditingImage, setIsEditingImage] = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__["useState"])(false);
  const clientWidth = Object(_use_client_width__WEBPACK_IMPORTED_MODULE_8__["default"])(containerRef, [align]);
  const isResizable = allowResize && !(isWideAligned && isLargeViewport); // Get naturalWidth and naturalHeight from image ref, and fall back to loaded natural
  // width and height. This resolves an issue in Safari where the loaded natural
  // witdth and height is otherwise lost when switching between alignments.

  const {
    naturalWidth,
    naturalHeight
  } = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(() => {
    var _imageRef$current, _imageRef$current2;

    return {
      naturalWidth: ((_imageRef$current = imageRef.current) === null || _imageRef$current === void 0 ? void 0 : _imageRef$current.naturalWidth) || loadedNaturalWidth || undefined,
      naturalHeight: ((_imageRef$current2 = imageRef.current) === null || _imageRef$current2 === void 0 ? void 0 : _imageRef$current2.naturalHeight) || loadedNaturalHeight || undefined
    };
  }, [loadedNaturalWidth, loadedNaturalHeight, (_imageRef$current3 = imageRef.current) === null || _imageRef$current3 === void 0 ? void 0 : _imageRef$current3.complete]);
  const filename = Object(_wordpress_url__WEBPACK_IMPORTED_MODULE_6__["getFilename"])(url);
  let defaultedAlt;

  if (alt) {
    defaultedAlt = alt;
  } else if (filename) {
    defaultedAlt = Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__["sprintf"])(
    /* translators: %s: file name */
    Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__["__"])('This image has an empty alt attribute; its file name is %s'), filename);
  } else {
    defaultedAlt = Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__["__"])('This image has an empty alt attribute');
  }

  let img =
  /*#__PURE__*/
  // Disable reason: Image itself is not meant to be interactive, but
  // should direct focus to block.
  React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("img", {
    src: temporaryURL || url,
    alt: defaultedAlt,
    onLoad: event => {
      var _event$target, _event$target2;

      setLoadedNaturalSize({
        loadedNaturalWidth: (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.naturalWidth,
        loadedNaturalHeight: (_event$target2 = event.target) === null || _event$target2 === void 0 ? void 0 : _event$target2.naturalHeight
      });
    },
    ref: imageRef
  }), temporaryURL && /*#__PURE__*/React.createElement(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__["Spinner"], null));
  let imageWidthWithinContainer;
  let imageHeightWithinContainer;

  if (clientWidth && naturalWidth && naturalHeight) {
    const exceedMaxWidth = naturalWidth > clientWidth;
    const ratio = naturalHeight / naturalWidth;
    imageWidthWithinContainer = exceedMaxWidth ? clientWidth : naturalWidth;
    imageHeightWithinContainer = exceedMaxWidth ? clientWidth * ratio : naturalHeight;
  }

  Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(() => {
    if (!isSelected) {
      setIsEditingImage(false);
    }

    if (isSelected && Object(_utils__WEBPACK_IMPORTED_MODULE_10__["isMediaDestroyed"])(id)) {
      onImageLoadError();
    }
  }, [isSelected]);
  const canEditImage = id && naturalWidth && naturalHeight && imageEditing;
  const allowCrop = !multiImageSelection && canEditImage && !isEditingImage;

  function onResizeStart() {
    toggleSelection(false);
  }

  function onResizeStop() {
    toggleSelection(true);
  }

  if (canEditImage && isEditingImage) {
    img = /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["__experimentalImageEditor"], {
      url: url,
      width: width,
      height: height,
      clientWidth: clientWidth,
      naturalHeight: naturalHeight,
      naturalWidth: naturalWidth
    });
  } else if (!isResizable || !imageWidthWithinContainer) {
    img = /*#__PURE__*/React.createElement("div", {
      style: {
        width,
        height
      }
    }, img);
  } else {
    const currentWidth = width || imageWidthWithinContainer;
    const currentHeight = height || imageHeightWithinContainer;
    const ratio = naturalWidth / naturalHeight;
    const minWidth = naturalWidth < naturalHeight ? _constants__WEBPACK_IMPORTED_MODULE_9__["MIN_SIZE"] : _constants__WEBPACK_IMPORTED_MODULE_9__["MIN_SIZE"] * ratio;
    const minHeight = naturalHeight < naturalWidth ? _constants__WEBPACK_IMPORTED_MODULE_9__["MIN_SIZE"] : _constants__WEBPACK_IMPORTED_MODULE_9__["MIN_SIZE"] / ratio; // With the current implementation of ResizableBox, an image needs an
    // explicit pixel value for the max-width. In absence of being able to
    // set the content-width, this max-width is currently dictated by the
    // vanilla editor style. The following variable adds a buffer to this
    // vanilla style, so 3rd party themes have some wiggleroom. This does,
    // in most cases, allow you to scale the image beyond the width of the
    // main column, though not infinitely.
    // @todo It would be good to revisit this once a content-width variable
    // becomes available.

    const maxWidthBuffer = maxWidth * 2.5;
    let showRightHandle = false;
    let showLeftHandle = false;
    /* eslint-disable no-lonely-if */

    if (align === 'center') {
      // When the image is centered, show both handles.
      showRightHandle = true;
      showLeftHandle = true;
    } else if (Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__["isRTL"])()) {
      // In RTL mode the image is on the right by default.
      // Show the right handle and hide the left handle only when it is
      // aligned left. Otherwise always show the left handle.
      if (align === 'left') {
        showRightHandle = true;
      } else {
        showLeftHandle = true;
      }
    } else {
      // Show the left handle and hide the right handle only when the
      // image is aligned right. Otherwise always show the right handle.
      if (align === 'right') {
        showLeftHandle = true;
      } else {
        showRightHandle = true;
      }
    }
    /* eslint-enable no-lonely-if */


    img = /*#__PURE__*/React.createElement(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__["ResizableBox"], {
      size: {
        width: width ? width : 'auto',
        height: height ? height : 'auto'
      },
      showHandle: isSelected,
      minWidth: minWidth,
      maxWidth: maxWidthBuffer,
      minHeight: minHeight,
      maxHeight: maxWidthBuffer / ratio,
      lockAspectRatio: true,
      enable: {
        top: false,
        right: showRightHandle,
        bottom: true,
        left: showLeftHandle
      },
      onResizeStart: onResizeStart,
      onResizeStop: (event, direction, elt, delta) => {
        onResizeStop();
        setAttributes({
          width: Math.abs(parseInt(currentWidth + delta.width, 10)),
          height: Math.abs(parseInt(currentHeight + delta.height, 10))
        });
      }
    }, img);
  }

  const controls = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["BlockControls"], {
    group: "block"
  }, allowCrop && /*#__PURE__*/React.createElement(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__["ToolbarButton"], {
    onClick: () => setIsEditingImage(true),
    icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_7__["crop"],
    label: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_5__["__"])('Crop')
  })), !multiImageSelection && !isEditingImage && /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["BlockControls"], {
    group: "other"
  }, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["MediaReplaceFlow"], {
    mediaId: id,
    mediaURL: url,
    allowedTypes: _constants__WEBPACK_IMPORTED_MODULE_9__["ALLOWED_MEDIA_TYPES"],
    accept: "image/*",
    onSelect: onSelectImage,
    onSelectURL: onSelectURL,
    onError: onUploadError,
    onCloseModal: onCloseModal
  })));
  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__["__experimentalImageEditingProvider"], {
    id: id,
    url: url,
    naturalWidth: naturalWidth,
    naturalHeight: naturalHeight,
    clientWidth: clientWidth,
    onSaveImage: imageAttributes => setAttributes(imageAttributes),
    isEditing: isEditingImage,
    onFinishEditing: () => setIsEditingImage(false)
  }, !temporaryURL && controls, img));
}

/***/ }),

/***/ "./src/blocks/image/layout.js":
/*!************************************!*\
  !*** ./src/blocks/image/layout.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Layout; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__);



function Layout(_ref) {
  let {
    attributes,
    isSelected,
    setAttributes,
    captionRef
  } = _ref;
  const {
    caption,
    heading,
    headingTag,
    layout,
    overlayContentPosition,
    seperatorStyle,
    seperatorPosition
  } = attributes;
  const headingRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    headingRef.current = heading;
  }, [caption]);
  const imageHeading = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, (!_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__["RichText"].isEmpty(heading) || isSelected) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__["RichText"], {
    ref: headingRef,
    tagName: headingTag,
    className: "uagb-image-heading",
    "aria-label": Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__["__"])('Image overlay heading text'),
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__["__"])('Add Heading'),
    value: heading,
    onChange: value => setAttributes({
      heading: value
    })
  }));
  const imageCaption = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, (!_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__["RichText"].isEmpty(caption) || isSelected) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__["RichText"], {
    ref: captionRef,
    tagName: "figcaption",
    className: "uagb-image-caption",
    "aria-label": Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__["__"])('Image caption text'),
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__["__"])('Add caption'),
    value: caption,
    onChange: value => setAttributes({
      caption: value
    })
  }));
  const separator = 'none' !== seperatorStyle && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "uagb-image-separator"
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, layout === 'overlay' ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "wp-block-uagb-image--layout-overlay__color-wrapper"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: `wp-block-uagb-image--layout-overlay__inner ${overlayContentPosition.replace(' ', '-')}`
  }, 'before_title' === seperatorPosition && separator, imageHeading, 'after_title' === seperatorPosition && separator, imageCaption, 'after_sub_title' === seperatorPosition && separator)) : imageCaption);
}

/***/ }),

/***/ "./src/blocks/image/render.js":
/*!************************************!*\
  !*** ./src/blocks/image/render.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_blob__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/blob */ "@wordpress/blob");
/* harmony import */ var _wordpress_blob__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_blob__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _wordpress_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @wordpress/data */ "@wordpress/data");
/* harmony import */ var _wordpress_data__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_wordpress_data__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/index.js");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _wordpress_core_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @wordpress/core-data */ "@wordpress/core-data");
/* harmony import */ var _wordpress_core_data__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_wordpress_core_data__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Controls_getPreviewType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @Controls/getPreviewType */ "./blocks-config/uagb-controls/getPreviewType.js");
/* harmony import */ var _Controls_block_icons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @Controls/block-icons */ "./blocks-config/uagb-controls/block-icons.js");
/* harmony import */ var _image__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./image */ "./src/blocks/image/image.js");
/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./layout */ "./src/blocks/image/layout.js");
/* harmony import */ var _editor_lazy_scss__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./editor.lazy.scss */ "./src/blocks/image/editor.lazy.scss");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils */ "./src/blocks/image/utils.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./constants */ "./src/blocks/image/constants.js");
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }















/**
 * Internal dependencies
 */


/**
 * Module constants
 */


const propTypes = {};
const defaultProps = {};

const Render = props => {
  const {
    attributes,
    setAttributes,
    className,
    isSelected,
    insertBlocksAfter,
    onReplace,
    context,
    clientId
  } = props.parentProps;
  const {
    block_id,
    isPreview,
    layout,
    url,
    alt,
    caption,
    align,
    id,
    linkTarget,
    linkClass,
    rel,
    imageHoverEffect,
    href,
    linkDestination
  } = attributes; // Add and remove the CSS on the drop and remove of the component.

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useLayoutEffect"])(() => {
    _editor_lazy_scss__WEBPACK_IMPORTED_MODULE_13__["default"].use();
    return () => {
      _editor_lazy_scss__WEBPACK_IMPORTED_MODULE_13__["default"].unuse();
    };
  }, []);
  const deviceType = Object(_Controls_getPreviewType__WEBPACK_IMPORTED_MODULE_9__["useDeviceType"])();
  const {
    createNotice
  } = Object(_wordpress_data__WEBPACK_IMPORTED_MODULE_4__["useDispatch"])('core/notices');
  const [temporaryURL, setTemporaryURL] = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])();
  const [externalBlob, setExternalBlob] = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])();
  const altRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    altRef.current = alt;
  }, [alt]);
  const captionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    captionRef.current = caption;
  }, [caption]);
  const ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
  const {
    imageDefaultSize,
    mediaUpload
  } = Object(_wordpress_data__WEBPACK_IMPORTED_MODULE_4__["useSelect"])(select => {
    const {
      getSettings
    } = select(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["store"]); // eslint-disable-next-line no-shadow

    const {
      imageDefaultSize,
      mediaUpload
    } = getSettings();
    return {
      imageDefaultSize,
      mediaUpload
    };
  }, []);
  const {
    image
  } = Object(_wordpress_data__WEBPACK_IMPORTED_MODULE_4__["useSelect"])(select => {
    const {
      getMedia
    } = select(_wordpress_core_data__WEBPACK_IMPORTED_MODULE_7__["store"]);
    return {
      image: id && isSelected ? getMedia(id) : null
    };
  }, [id, isSelected]); // A callback passed to MediaUpload,
  // fired when the media modal closes.

  function onCloseModal() {
    if (Object(_utils__WEBPACK_IMPORTED_MODULE_14__["isMediaDestroyed"])(attributes === null || attributes === void 0 ? void 0 : attributes.id)) {
      setAttributes({
        url: undefined,
        id: undefined
      });
    }
  }
  /*
  	Runs an error callback if the image does not load.
  	If the error callback is triggered, we infer that that image
  	has been deleted.
  */


  function onImageError() {
    let isReplaced = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

    // If the image block was not replaced with an embed,
    // clear the attributes and trigger the placeholder.
    if (!isReplaced) {
      setAttributes({
        url: undefined,
        id: undefined
      });
    }
  }

  function onUploadError(message) {
    createNotice('error', message, {
      type: 'snackbar'
    });
  }

  function onSelectImage(media) {
    var _wp, _wp$media, _wp$media$view, _wp$media$view$settin, _wp$media$view$settin2;

    if (!media || !media.url) {
      setAttributes({
        url: undefined,
        alt: undefined,
        id: undefined,
        title: undefined,
        caption: undefined
      });
      return;
    }

    if (Object(_wordpress_blob__WEBPACK_IMPORTED_MODULE_2__["isBlobURL"])(media.url)) {
      setTemporaryURL(media.url);
      return;
    }

    setTemporaryURL();
    let mediaAttributes = Object(_utils__WEBPACK_IMPORTED_MODULE_14__["pickRelevantMediaFiles"])(media, imageDefaultSize); // If a caption text was meanwhile written by the user,
    // make sure the text is not overwritten by empty captions.

    if (captionRef.current && !mediaAttributes.caption) {
      mediaAttributes = { ...mediaAttributes,
        alt: mediaAttributes.alt,
        id: mediaAttributes.id,
        link: mediaAttributes.link
      };
    }

    let additionalAttributes; // Reset the dimension attributes if changing to a different image.

    if (!media.id || media.id !== id) {
      additionalAttributes = {
        width: undefined,
        height: undefined,
        // Fallback to size "full" if there's no default image size.
        // It means the image is smaller, and the block will use a full-size URL.
        sizeSlug: Object(_utils__WEBPACK_IMPORTED_MODULE_14__["hasDefaultSize"])(media, imageDefaultSize) ? imageDefaultSize : 'full'
      };
    } else {
      // Keep the same url when selecting the same file, so "Image Size"
      // option is not changed.
      additionalAttributes = {
        url
      };
    } // Check if default link setting should be used.
    // eslint-disable-next-line no-shadow


    let linkDestination = attributes.linkDestination;

    if (!linkDestination) {
      // Use the WordPress option to determine the proper default.
      // The constants used in Gutenberg do not match WP options so a little more complicated than ideal.
      // TODO: fix this in a follow up PR, requires updating media-text and ui component.
      switch (((_wp = wp) === null || _wp === void 0 ? void 0 : (_wp$media = _wp.media) === null || _wp$media === void 0 ? void 0 : (_wp$media$view = _wp$media.view) === null || _wp$media$view === void 0 ? void 0 : (_wp$media$view$settin = _wp$media$view.settings) === null || _wp$media$view$settin === void 0 ? void 0 : (_wp$media$view$settin2 = _wp$media$view$settin.defaultProps) === null || _wp$media$view$settin2 === void 0 ? void 0 : _wp$media$view$settin2.link) || _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_NONE"]) {
        case 'file':
        case _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_MEDIA"]:
          linkDestination = _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_MEDIA"];
          break;

        case 'post':
        case _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_ATTACHMENT"]:
          linkDestination = _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_ATTACHMENT"];
          break;

        case _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_CUSTOM"]:
          linkDestination = _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_CUSTOM"];
          break;

        case _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_NONE"]:
          linkDestination = _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_NONE"];
          break;
      }
    } // Check if the image is linked to it's media.
    // eslint-disable-next-line no-shadow


    let href;

    switch (linkDestination) {
      case _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_MEDIA"]:
        href = media.url;
        break;

      case _constants__WEBPACK_IMPORTED_MODULE_15__["LINK_DESTINATION_ATTACHMENT"]:
        href = media.link;
        break;
    }

    mediaAttributes.href = href;
    setAttributes({ ...mediaAttributes,
      ...additionalAttributes,
      linkDestination
    });
  }

  function onSelectURL(newURL) {
    if (newURL !== url) {
      setAttributes({
        url: newURL,
        id: undefined,
        width: undefined,
        height: undefined,
        sizeSlug: imageDefaultSize
      });
    }
  }

  function updateAlignment(nextAlign) {
    const extraUpdatedAttributes = ['wide', 'full'].includes(nextAlign) ? {
      width: undefined,
      height: undefined
    } : {};
    setAttributes({ ...extraUpdatedAttributes,
      align: nextAlign
    });
  }

  let isTemp = Object(_utils__WEBPACK_IMPORTED_MODULE_14__["isTemporaryImage"])(id, url); // Upload a temporary image on mount.

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    if (!isTemp) {
      return;
    }

    const file = Object(_wordpress_blob__WEBPACK_IMPORTED_MODULE_2__["getBlobByURL"])(url);

    if (file) {
      mediaUpload({
        filesList: [file],
        onFileChange: _ref => {
          let [img] = _ref;
          onSelectImage(img);
        },
        allowedTypes: _constants__WEBPACK_IMPORTED_MODULE_15__["ALLOWED_MEDIA_TYPES"],
        onError: message => {
          isTemp = false;
          createNotice('error', message, {
            type: 'snackbar'
          });
          setAttributes({
            src: undefined,
            id: undefined,
            url: undefined
          });
        }
      });
    }
  }, []); // If an image is temporary, revoke the Blob url when it is uploaded (and is
  // no longer temporary).

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    if (isTemp) {
      setTemporaryURL(url);
      return;
    }

    Object(_wordpress_blob__WEBPACK_IMPORTED_MODULE_2__["revokeBlobURL"])(temporaryURL);
  }, [isTemp, url]);
  const isExternal = Object(_utils__WEBPACK_IMPORTED_MODULE_14__["isExternalImage"])(id, url);
  const src = isExternal ? url : undefined;
  const mediaPreview = !!url && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    alt: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__["__"])('Edit image'),
    title: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__["__"])('Edit image'),
    className: 'edit-image-preview',
    src: url
  }); // If an image is externally hosted, try to fetch the image data. This may
  // fail if the image host doesn't allow CORS with the domain. If it works,
  // we can enable a button in the toolbar to upload the image.

  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    if (!Object(_utils__WEBPACK_IMPORTED_MODULE_14__["isExternalImage"])(id, url) || !isSelected || externalBlob) {
      return;
    }

    window.fetch(url).then(response => response.blob()).then(blob => setExternalBlob(blob)) // Do nothing, cannot upload.
    .catch(() => {});
  }, [id, url, isSelected, externalBlob]);

  function uploadExternal() {
    mediaUpload({
      filesList: [externalBlob],

      onFileChange(_ref2) {
        let [img] = _ref2;
        onSelectImage(img);

        if (Object(_wordpress_blob__WEBPACK_IMPORTED_MODULE_2__["isBlobURL"])(img === null || img === void 0 ? void 0 : img.url)) {
          return;
        }

        setExternalBlob();
        createNotice('success', Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__["__"])('Image uploaded.'), {
          type: 'snackbar'
        });
      },

      allowedTypes: _constants__WEBPACK_IMPORTED_MODULE_15__["ALLOWED_MEDIA_TYPES"],

      onError(message) {
        createNotice('error', message, {
          type: 'snackbar'
        });
      }

    });
  } // eslint-disable-next-line no-shadow


  function onSetHref(props) {
    setAttributes(props);
  }

  const previewImageData = `${uagb_blocks_info.uagb_url}/admin/assets/preview-images/image.svg`;
  const blockProps = Object(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["useBlockProps"])({
    ref
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["BlockControls"], {
    group: "block"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["BlockAlignmentControl"], {
    value: align,
    onChange: updateAlignment
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["__experimentalImageURLInputUI"], {
    url: href || '',
    onChangeUrl: onSetHref,
    linkDestination: linkDestination,
    mediaUrl: image && image.source_url || url,
    mediaLink: image && image.link,
    linkTarget: linkTarget,
    linkClass: linkClass,
    rel: rel
  }), externalBlob && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__["ToolbarButton"], {
    onClick: uploadExternal,
    icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_5__["upload"],
    label: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__["__"])('Upload external image')
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", _extends({}, blockProps, {
    className: classnames__WEBPACK_IMPORTED_MODULE_1___default()(className, `uagb-editor-preview-mode-${deviceType.toLowerCase()}`, `uagb-block-${block_id}`, `wp-block-uagb-image--layout-${layout}`, `wp-block-uagb-image--effect-${imageHoverEffect}`, `wp-block-uagb-image--align-${align ? align : 'none'}`)
  }), (temporaryURL || url) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("figure", {
    className: "wp-block-uagb-image__figure"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_image__WEBPACK_IMPORTED_MODULE_11__["default"], {
    temporaryURL: temporaryURL,
    attributes: attributes,
    setAttributes: setAttributes,
    isSelected: isSelected,
    insertBlocksAfter: insertBlocksAfter,
    onReplace: onReplace,
    onSelectImage: onSelectImage,
    onSelectURL: onSelectURL,
    onUploadError: onUploadError,
    containerRef: ref,
    context: context,
    clientId: clientId,
    onCloseModal: onCloseModal,
    onImageLoadError: onImageError
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layout__WEBPACK_IMPORTED_MODULE_12__["default"], {
    captionRef: captionRef,
    attributes: attributes,
    setAttributes: setAttributes,
    isSelected: isSelected
  })), isPreview ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    width: "100%",
    src: previewImageData,
    alt: ""
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["MediaPlaceholder"], {
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_6__["BlockIcon"], {
      icon: _Controls_block_icons__WEBPACK_IMPORTED_MODULE_10__["default"].image
    }),
    labels: {
      title: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__["__"])('Advanced Image', 'ultimate-addons-for-gutenberg'),
      instructions: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_8__["__"])('Upload an image file, pick one from your media library, or add one with a URL.', 'ultimate-addons-for-gutenberg')
    },
    onSelect: onSelectImage,
    onSelectURL: onSelectURL,
    onError: onUploadError,
    onClose: onCloseModal,
    accept: "image/*",
    allowedTypes: _constants__WEBPACK_IMPORTED_MODULE_15__["ALLOWED_MEDIA_TYPES"],
    value: {
      id,
      src
    },
    mediaPreview: mediaPreview,
    disableMediaButtons: temporaryURL || url
  })));
};

Render.propTypes = propTypes;
Render.defaultProps = defaultProps;
/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(Render));

/***/ }),

/***/ "./src/blocks/image/use-client-width.js":
/*!**********************************************!*\
  !*** ./src/blocks/image/use-client-width.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useClientWidth; });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);

function useClientWidth(ref, dependencies) {
  const [clientWidth, setClientWidth] = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__["useState"])();

  function calculateClientWidth() {
    setClientWidth(ref.current.clientWidth);
  }

  Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(calculateClientWidth, dependencies);
  Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(() => {
    const {
      defaultView
    } = ref.current.ownerDocument;
    defaultView.addEventListener('resize', calculateClientWidth);
    return () => {
      defaultView.removeEventListener('resize', calculateClientWidth);
    };
  }, []);
  return clientWidth;
}

/***/ }),

/***/ "./src/blocks/image/utils.js":
/*!***********************************!*\
  !*** ./src/blocks/image/utils.js ***!
  \***********************************/
/*! exports provided: pickRelevantMediaFiles, isTemporaryImage, isExternalImage, hasDefaultSize, isMediaDestroyed */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pickRelevantMediaFiles", function() { return pickRelevantMediaFiles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTemporaryImage", function() { return isTemporaryImage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isExternalImage", function() { return isExternalImage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasDefaultSize", function() { return hasDefaultSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMediaDestroyed", function() { return isMediaDestroyed; });
/* harmony import */ var _wordpress_blob__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/blob */ "@wordpress/blob");
/* harmony import */ var _wordpress_blob__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_blob__WEBPACK_IMPORTED_MODULE_0__);

const pickRelevantMediaFiles = (image, size) => {
  var _image$media_details;

  const {
    alt,
    id,
    link,
    caption,
    url
  } = image;
  const imageProps = {
    alt,
    id,
    link,
    caption,
    url
  };

  if (image !== null && image !== void 0 && image.sizes && image !== null && image !== void 0 && image.sizes[size]) {
    var _image$sizes$size, _image$sizes$size2, _image$sizes$size3;

    return { ...imageProps,
      width: image === null || image === void 0 ? void 0 : (_image$sizes$size = image.sizes[size]) === null || _image$sizes$size === void 0 ? void 0 : _image$sizes$size.width,
      height: image === null || image === void 0 ? void 0 : (_image$sizes$size2 = image.sizes[size]) === null || _image$sizes$size2 === void 0 ? void 0 : _image$sizes$size2.height,
      url: image === null || image === void 0 ? void 0 : (_image$sizes$size3 = image.sizes[size]) === null || _image$sizes$size3 === void 0 ? void 0 : _image$sizes$size3.url
    };
  } else if (image !== null && image !== void 0 && image.media_details && image !== null && image !== void 0 && (_image$media_details = image.media_details) !== null && _image$media_details !== void 0 && _image$media_details.sizes[size]) {
    var _image$media_details2, _image$media_details3, _image$media_details4, _image$media_details5, _image$media_details6, _image$media_details7;

    return { ...imageProps,
      width: image === null || image === void 0 ? void 0 : (_image$media_details2 = image.media_details) === null || _image$media_details2 === void 0 ? void 0 : (_image$media_details3 = _image$media_details2.sizes[size]) === null || _image$media_details3 === void 0 ? void 0 : _image$media_details3.width,
      height: image === null || image === void 0 ? void 0 : (_image$media_details4 = image.media_details) === null || _image$media_details4 === void 0 ? void 0 : (_image$media_details5 = _image$media_details4.sizes[size]) === null || _image$media_details5 === void 0 ? void 0 : _image$media_details5.height,
      url: image === null || image === void 0 ? void 0 : (_image$media_details6 = image.media_details) === null || _image$media_details6 === void 0 ? void 0 : (_image$media_details7 = _image$media_details6.sizes[size]) === null || _image$media_details7 === void 0 ? void 0 : _image$media_details7.source_url
    };
  }

  return { ...imageProps,
    url: image === null || image === void 0 ? void 0 : image.url
  };
};
/**
 * Is the URL a temporary blob URL? A blob URL is one that is used temporarily
 * while the image is being uploaded and will not have an id yet allocated.
 *
 * @param {number=} id  The id of the image.
 * @param {string=} url The url of the image.
 *
 * @return {boolean} Is the URL a Blob URL
 */

const isTemporaryImage = (id, url) => !id && Object(_wordpress_blob__WEBPACK_IMPORTED_MODULE_0__["isBlobURL"])(url);
/**
 * Is the url for the image hosted externally. An externally hosted image has no
 * id and is not a blob url.
 *
 * @param {number=} id  The id of the image.
 * @param {string=} url The url of the image.
 *
 * @return {boolean} Is the url an externally hosted url?
 */

const isExternalImage = (id, url) => url && !id && !Object(_wordpress_blob__WEBPACK_IMPORTED_MODULE_0__["isBlobURL"])(url);
/**
 * Checks if WP generated default image size. Size generation is skipped
 * when the image is smaller than the said size.
 *
 * @param {Object} image
 * @param {string} defaultSize
 *
 * @return {boolean} Whether or not it has default image size.
 */

const hasDefaultSize = (image, defaultSize) => {
  return image.hasOwnProperty('sizes') || image.hasOwnProperty('url') || image.hasOwnProperty('media_details') || image.hasOwnProperty('source_url') || image[defaultSize] !== undefined;
};
/**
 * Checks if a media attachment object has been "destroyed",
 * that is, removed from the media library. The core Media Library
 * adds a `destroyed` property to a deleted attachment object in the media collection.
 *
 * @param {number} id The attachment id.
 *
 * @return {boolean} Whether the image has been destroyed.
 */

const isMediaDestroyed = id => {
  var _wp, _wp$media;

  const attachment = ((_wp = wp) === null || _wp === void 0 ? void 0 : (_wp$media = _wp.media) === null || _wp$media === void 0 ? void 0 : _wp$media.attachment(id)) || {};
  return attachment.destroyed;
};

/***/ })

}]);
//# sourceMappingURL=render.js.map
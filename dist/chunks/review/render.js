(window["webpackJsonp_ultimate_addons_for_gutenberg"] = window["webpackJsonp_ultimate_addons_for_gutenberg"] || []).push([["chunks/review/render"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./src/blocks/review/editor.lazy.scss":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./src/blocks/review/editor.lazy.scss ***!
  \***************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default.a);
// Module
___CSS_LOADER_EXPORT___.push([module.i, ".editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices {\n  padding: 8px 10px;\n  background-color: #fff8e5;\n  border-left: 5px solid #ffb901;\n  color: #32373c;\n  font-size: 13px;\n  line-height: 20px; }\n  .editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices ul {\n    padding-bottom: 0;\n    margin: 0; }\n  .editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices h6 {\n    margin: 0;\n    font-size: inherit;\n    line-height: inherit; }\n  .editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices p {\n    margin: 15px 0 0;\n    color: #555d66;\n    font-size: inherit; }\n\n.editor-styles-wrapper [data-type=\"uagb/review\"] .uagb_review_add_entry.dashicons.dashicons-plus-alt {\n  left: 50%;\n  width: 100%; }\n\n.editor-styles-wrapper [data-type=\"uagb/review\"] .uagb_review_average_stars,\n.editor-styles-wrapper [data-type=\"uagb/review\"] .uagb_review_entry .dashicons-trash {\n  float: right;\n  margin-left: 50px; }\n", "",{"version":3,"sources":["webpack://./src/blocks/review/editor.lazy.scss"],"names":[],"mappings":"AAAA;EACE,iBAAiB;EACjB,yBAAyB;EACzB,8BAA8B;EAC9B,cAAc;EACd,eAAe;EACf,iBAAiB,EAAE;EACnB;IACE,iBAAiB;IACjB,SAAS,EAAE;EACb;IACE,SAAS;IACT,kBAAkB;IAClB,oBAAoB,EAAE;EACxB;IACE,gBAAgB;IAChB,cAAc;IACd,kBAAkB,EAAE;;AAExB;EACE,SAAS;EACT,WAAW,EAAE;;AAEf;;EAEE,YAAY;EACZ,iBAAiB,EAAE","sourcesContent":[".editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices {\n  padding: 8px 10px;\n  background-color: #fff8e5;\n  border-left: 5px solid #ffb901;\n  color: #32373c;\n  font-size: 13px;\n  line-height: 20px; }\n  .editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices ul {\n    padding-bottom: 0;\n    margin: 0; }\n  .editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices h6 {\n    margin: 0;\n    font-size: inherit;\n    line-height: inherit; }\n  .editor-styles-wrapper [data-type=\"uagb/review\"] .rating-schema-notices p {\n    margin: 15px 0 0;\n    color: #555d66;\n    font-size: inherit; }\n\n.editor-styles-wrapper [data-type=\"uagb/review\"] .uagb_review_add_entry.dashicons.dashicons-plus-alt {\n  left: 50%;\n  width: 100%; }\n\n.editor-styles-wrapper [data-type=\"uagb/review\"] .uagb_review_average_stars,\n.editor-styles-wrapper [data-type=\"uagb/review\"] .uagb_review_entry .dashicons-trash {\n  float: right;\n  margin-left: 50px; }\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/blocks/review/editor.lazy.scss":
/*!********************************************!*\
  !*** ./src/blocks/review/editor.lazy.scss ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_lib_loader_js_editor_lazy_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./editor.lazy.scss */ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./src/blocks/review/editor.lazy.scss");

            

var refs = 0;
var update;
var options = {"injectType":"lazySingletonStyleTag","attributes":{"id":"uagb-editor-styles"}};

options.insert = "head";
options.singleton = true;

var exported = {};

exported.locals = _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_lib_loader_js_editor_lazy_scss__WEBPACK_IMPORTED_MODULE_1__["default"].locals || {};
exported.use = function() {
  if (!(refs++)) {
    update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_lib_loader_js_editor_lazy_scss__WEBPACK_IMPORTED_MODULE_1__["default"], options);
  }

  return exported;
};
exported.unuse = function() {
  if (refs > 0 && !--refs) {
    update();
    update = null;
  }
};



;
       /* harmony default export */ __webpack_exports__["default"] = (exported);


/***/ }),

/***/ "./src/blocks/review/render.js":
/*!*************************************!*\
  !*** ./src/blocks/review/render.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _review_body__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./review-body */ "./src/blocks/review/review-body.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _editor_lazy_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./editor.lazy.scss */ "./src/blocks/review/editor.lazy.scss");
/* harmony import */ var _Controls_getPreviewType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @Controls/getPreviewType */ "./blocks-config/uagb-controls/getPreviewType.js");
// Import block dependencies and components






const Render = props => {
  // Add and remove the CSS on the drop and remove of the component.
  Object(react__WEBPACK_IMPORTED_MODULE_2__["useLayoutEffect"])(() => {
    _editor_lazy_scss__WEBPACK_IMPORTED_MODULE_3__["default"].use();
    return () => {
      _editor_lazy_scss__WEBPACK_IMPORTED_MODULE_3__["default"].unuse();
    };
  }, []);
  props = props.parentProps;
  const deviceType = Object(_Controls_getPreviewType__WEBPACK_IMPORTED_MODULE_4__["useDeviceType"])();
  const {
    attributes: {
      block_id,
      authorName,
      itemName,
      description,
      parts,
      starCount,
      summaryTitle,
      summaryDescription,
      inactiveStarColor,
      activeStarColor,
      ctaLink,
      ctaTarget,
      rTitle,
      rContent,
      rAuthor,
      headingTag,
      mainimage,
      imgSize,
      showFeature,
      showAuthor,
      starOutlineColor,
      enableDescription,
      enableImage
    },
    setAttributes,
    isSelected,
    className
  } = props;
  const bodyInitialState = {
    average: props.attributes.parts.map(i => i.value).reduce((total, v) => total + v) / props.attributes.parts.length
  };
  const [bodyState, bodySetStateValue] = Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(bodyInitialState);
  const starInitialState = {
    displayValue: props.value,
    displayColor: props.activeStarColor
  };
  const [starState, starSetStateValue] = Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(starInitialState);
  let urlChk = '';
  let title = '';

  if ('undefined' !== typeof props.attributes.mainimage && null !== props.attributes.mainimage && '' !== props.attributes.mainimage) {
    urlChk = props.attributes.mainimage.url;
    title = props.attributes.mainimage.title;
  }

  let url = '';

  if ('' !== urlChk) {
    const size = props.attributes.mainimage.sizes;
    const imageSize = props.attributes.imgSize;

    if ('undefined' !== typeof size && 'undefined' !== typeof size[imageSize]) {
      url = size[imageSize].url;
    } else {
      url = urlChk;
    }
  }

  let imageIconHtml = '';

  if (mainimage && mainimage.url) {
    imageIconHtml = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img", {
      className: "uagb-review__source-image",
      src: url,
      title: title,
      alt: ""
    });
  }

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_0___default()(className, 'uagb-ratings__outer-wrap', `uagb-block-${block_id.substr(0, 8)}`, `uagb-editor-preview-mode-${deviceType.toLowerCase()}`)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_review_body__WEBPACK_IMPORTED_MODULE_1__["default"], {
    rTitle: rTitle,
    setTitle: newValue => setAttributes({
      rTitle: newValue
    }),
    ctaLink: ctaLink,
    ctaTarget: ctaTarget,
    rContent: rContent,
    setDescription: newValue => setAttributes({
      rContent: newValue
    }),
    rAuthor: rAuthor,
    setAuthorName: newValue => setAttributes({
      rAuthor: newValue
    }),
    headingTag: headingTag,
    mainimage: mainimage,
    imgSize: imgSize,
    image_icon_html: imageIconHtml,
    isSelected: isSelected,
    authorName: authorName,
    itemName: itemName,
    description: description,
    descriptionEnabled: enableDescription,
    ID: block_id,
    imageEnabled: enableImage,
    items: parts,
    starCount: starCount,
    summaryTitle: summaryTitle,
    summaryDescription: summaryDescription,
    inactiveStarColor: inactiveStarColor,
    activeStarColor: activeStarColor,
    selectedStarColor: activeStarColor,
    starOutlineColor: starOutlineColor,
    setItemName: newValue => setAttributes({
      itemName: newValue
    }),
    setImage: img => setAttributes({
      imgID: img.id,
      imgURL: img.url,
      imgAlt: img.alt
    }),
    setItems: newValue => setAttributes({
      parts: newValue
    }),
    setSummaryTitle: newValue => setAttributes({
      summaryTitle: newValue
    }),
    setSummaryDescription: newValue => setAttributes({
      summaryDescription: newValue
    }),
    hasFocus: isSelected,
    setEditable: newValue => bodySetStateValue({
      editable: newValue
    }),
    setActiveStarIndex: editedStar => bodySetStateValue({
      editedStar
    }),
    showfeature: showFeature,
    showauthor: showAuthor,
    state: bodyState,
    setStateValue: bodySetStateValue,
    starState: starState,
    starSetStateValue: starSetStateValue
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(Render));

/***/ }),

/***/ "./src/blocks/review/review-body.js":
/*!******************************************!*\
  !*** ./src/blocks/review/review-body.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _star__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./star */ "./src/blocks/review/star.js");




const ReviewBody = props => {
  const {
    ID,
    items,
    summaryTitle,
    summaryDescription,
    starCount,
    setItems,
    setSummaryDescription,
    setSummaryTitle,
    setTitle,
    setDescription,
    setAuthorName,
    inactiveStarColor,
    activeStarColor,
    selectedStarColor,
    starOutlineColor,
    ctaTarget,
    ctaLink,
    setActiveStarIndex,
    rTitle,
    rContent,
    rAuthor,
    headingTag,
    image_icon_html,
    showfeature,
    imageEnabled,
    descriptionEnabled,
    showauthor
  } = props;
  const {
    average
  } = props.state;
  const newAverage = items.map(i => i.value).reduce((total, v) => total + v) / items.length;

  if (average !== newAverage) {
    props.setStateValue({
      average: newAverage
    });
  }

  let target = '_self';
  const rel = 'noopener noreferrer';

  if (ctaTarget) {
    target = '_blank';
  }

  return /*#__PURE__*/React.createElement("div", {
    className: "uagb_review_block"
  }, /*#__PURE__*/React.createElement("a", {
    href: ctaLink,
    className: "uagb-rating-link-wrapper",
    target: target,
    rel: rel
  }, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__["RichText"], {
    tagName: headingTag,
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Title of the review', 'ultimate-addons-for-gutenberg'),
    keepPlaceholderOnFocus: true,
    value: rTitle,
    className: "uagb-rating-title",
    onChange: text => setTitle(text)
  })), descriptionEnabled === true && /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__["RichText"], {
    tagName: "p",
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Review Description', 'ultimate-addons-for-gutenberg'),
    keepPlaceholderOnFocus: true,
    value: rContent,
    className: "uagb-rating-desc",
    onChange: text => setDescription(text)
  }), showauthor === true && /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__["RichText"], {
    tagName: "p",
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Review Author', 'ultimate-addons-for-gutenberg'),
    keepPlaceholderOnFocus: true,
    value: rAuthor,
    className: "uagb-rating-author",
    onChange: text => setAuthorName(text)
  }), imageEnabled === true && /*#__PURE__*/React.createElement("div", {
    className: "uagb-rating__source-wrap"
  }, image_icon_html), items.map((j, i) => showfeature === true && /*#__PURE__*/React.createElement("div", {
    className: "uagb_review_entry",
    key: i
  }, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__["RichText"], {
    style: {
      marginRight: 'auto'
    },
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Edit feature'),
    value: j.label,
    onChange: text => setItems([...items.slice(0, i), {
      label: text,
      value: j.value
    }, ...items.slice(i + 1)])
  }), /*#__PURE__*/React.createElement("div", {
    style: {
      marginLeft: 'auto',
      minWidth: items.length > 1 ? 120 : 100
    }
  }, items.length > 1 && /*#__PURE__*/React.createElement("div", {
    // eslint-disable-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions
    className: "dashicons dashicons-trash",
    onClick: () => {
      const newItems = items.slice(0, i).concat(items.slice(i + 1, items.length));
      setItems(newItems);
      props.setStateValue({
        average: newItems.map(k => k.value).reduce((total, v) => total + v) / newItems.length
      });
    }
  }), /*#__PURE__*/React.createElement(_star__WEBPACK_IMPORTED_MODULE_2__["default"], {
    id: `${ID}-${i}`,
    key: i,
    value: j.value,
    limit: starCount,
    setValue: newValue => {
      const newArray = [...items.slice(0, i), {
        label: j.label,
        value: newValue
      }, ...items.slice(i + 1)];
      setItems(newArray);
      setActiveStarIndex(i);
      props.setStateValue({
        average: newArray.map(k => k.value).reduce((total, v) => total + v) / newArray.length
      });
    },
    inactiveStarColor: inactiveStarColor,
    activeStarColor: activeStarColor,
    selectedStarColor: selectedStarColor,
    starOutlineColor: starOutlineColor,
    state: props.starState,
    setStateValue: props.starSetStateValue
  })))), showfeature === true && /*#__PURE__*/React.createElement("div", {
    // eslint-disable-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions
    title: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Insert new review entry'),
    onClick: () => {
      setItems([...items, {
        label: '',
        value: 0
      }]);
      props.setStateValue({
        average: average / (items.length + 1)
      });
    },
    className: "uagb_review_add_entry dashicons dashicons-plus-alt"
  }), /*#__PURE__*/React.createElement("div", {
    className: "uagb_review_summary"
  }, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__["RichText"], {
    className: "uagb_review_summary_title",
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Title of the summary goes here', 'ultimate-addons-for-gutenberg'),
    tagName: "p",
    onChange: text => setSummaryTitle(text),
    value: summaryTitle
  }), /*#__PURE__*/React.createElement("div", {
    className: "uagb_review_overall_value"
  }, /*#__PURE__*/React.createElement(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_0__["RichText"], {
    placeholder: Object(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__["__"])('Summary of the review goes here', 'ultimate-addons-for-gutenberg'),
    onChange: text => setSummaryDescription(text),
    value: summaryDescription
  }), /*#__PURE__*/React.createElement("div", {
    className: "uagb_review_average"
  }, /*#__PURE__*/React.createElement("span", {
    className: "uagb_review_rating"
  }, Math.round(average * 10) / 10), /*#__PURE__*/React.createElement(_star__WEBPACK_IMPORTED_MODULE_2__["default"], {
    id: `${ID}-average`,
    className: "uagb_review_average_stars",
    onHover: () => null,
    onClick: () => null,
    value: average,
    limit: starCount,
    inactiveStarColor: inactiveStarColor,
    activeStarColor: activeStarColor,
    selectedStarColor: selectedStarColor,
    starOutlineColor: starOutlineColor,
    state: props.starState,
    setStateValue: props.starSetStateValue
  })))));
};

/* harmony default export */ __webpack_exports__["default"] = (ReviewBody);

/***/ })

}]);
//# sourceMappingURL=render.js.map